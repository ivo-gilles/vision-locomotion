# Phase 2 Training Configuration - Monolithic Architecture

# Environment
env:
  num_envs: 256  # Reduced due to depth rendering
  num_observations: 179  # 48 proprio + 128 depth latent + 3 cmd
  num_actions: 12
  depth_resolution: [58, 87]  # After preprocessing
  depth_latency: 40.0  # ms
  depth_latency_jitter: 20.0  # ms
  episode_length: 1000
  terrain:
    num_rows: 20
    num_cols: 10
    terrain_size: 8.0
    fractal_height_range: [0.02, 0.04]
    types: ["flat", "stairs", "curbs", "gaps", "stepping_stones"]
  
# Policy Architecture
policy:
  architecture: "monolithic"
  depth_convnet:
    channels: [1, 16, 32]
    kernel_sizes: [3, 3]
    strides: [2, 2]
    output_dim: 128
  gru:
    input_dim: 179
    hidden_dim: 256
    num_layers: 1
  action_mlp:
    hidden_dims: [128, 64]
    activation: "tanh"
  
# Training
training:
  algorithm: "dagger"
  total_timesteps: 6000000  # 6M samples
  learning_rate: 1e-4
  batch_size: 32
  n_epochs: 5
  bptt_length: 24
  bc_initial_samples: 1000000  # Behavioral cloning warmup
  dagger_iterations: 100
  checkpoint_freq: 100000
  
# Domain Randomization (same as Phase 1)
domain_randomization:
  mass_range: [-2.0, 6.0]
  com_shift_range: [-0.15, 0.15]
  friction_range: [0.3, 1.25]
  motor_strength_range: [0.9, 1.1]
  pd_stiffness_range: [35, 45]
  pd_damping_range: [0.4, 0.6]
  push_interval: 15.0
  push_velocity: 0.3
  
# Observation Noise (same as Phase 1)
observation_noise:
  joint_angles: {scale: 1.0, bias: 0.0, sigma: 0.01}
  joint_velocities: {scale: 0.05, bias: 0.0, sigma: 0.05}
  angular_velocity: {scale: 0.25, bias: 0.0, sigma: 0.05}
  orientation: {scale: 1.0, bias: 0.0, sigma: 0.02}
  
# Commands (same as Phase 1)
commands:
  base_velocity: 0.35
  heading_range: [-10, 10]
  curve_velocity_range: [0.2, 0.75]
  curve_heading_range: [-60, 60]
  turn_heading_range: [-180, 180]
  
# Logging
logging:
  use_wandb: true
  project_name: "vision-locomotion-phase2"
  log_freq: 1000
  save_dir: "./logs"
