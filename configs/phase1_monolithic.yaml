# Phase 1 Training Configuration - Monolithic Architecture

# Environment
env:
  num_envs: 4096
  num_observations: 64  # 45 proprio + 16 scandots latent + 3 cmd (actual: 12+12+3+3+3+12 proprio + 16 vision + 3 cmd)
  num_actions: 12
  num_scandots: 16
  episode_length: 1000  # steps at 50Hz
  terrain:
    num_rows: 20
    num_cols: 10
    terrain_size: 8.0  # meters
    fractal_height_range: [0.02, 0.04]  # meters
    types: ["flat", "stairs", "curbs", "gaps", "stepping_stones"]
  
# Policy Architecture
policy:
  architecture: "monolithic"
  scandots_mlp:
    hidden_dims: [64, 32]
    output_dim: 16
  gru:
    input_dim: 64  # 45 proprio + 16 vision + 3 commands (matches actual environment output)
    hidden_dim: 256
    num_layers: 1
  action_mlp:
    hidden_dims: [128, 64]
    activation: "tanh"
  
# Training
training:
  algorithm: "ppo"
  total_timesteps: 15000000000  # 15B samples
  learning_rate: 3e-4
  batch_size: 64
  n_epochs: 10
  clip_range: 0.2
  entropy_coef: 0.01
  value_loss_coef: 0.5
  max_grad_norm: 1.0
  bptt_length: 24
  checkpoint_freq: 1000000  # steps
  
# Rewards (scales)
rewards:
  tracking: 7.0
  work: -1e-4
  foot_jerk: -1e-4
  feet_drag: -1e-4
  collision: -1.0
  survival: 1.0
  
# Domain Randomization
domain_randomization:
  mass_range: [-2.0, 6.0]  # kg
  com_shift_range: [-0.15, 0.15]  # meters
  friction_range: [0.3, 1.25]
  motor_strength_range: [0.9, 1.1]
  pd_stiffness_range: [35, 45]
  pd_damping_range: [0.4, 0.6]
  push_interval: 15.0  # seconds
  push_velocity: 0.3  # m/s
  
# Observation Noise
observation_noise:
  joint_angles: {scale: 1.0, bias: 0.0, sigma: 0.01}
  joint_velocities: {scale: 0.05, bias: 0.0, sigma: 0.05}
  angular_velocity: {scale: 0.25, bias: 0.0, sigma: 0.05}
  orientation: {scale: 1.0, bias: 0.0, sigma: 0.02}
  scandots_height: {scale: 5.0, bias: 0.0, sigma: 0.07}
  
# Commands
commands:
  base_velocity: 0.35  # m/s
  heading_range: [-10, 10]  # degrees
  curve_velocity_range: [0.2, 0.75]  # m/s
  curve_heading_range: [-60, 60]  # degrees
  turn_heading_range: [-180, 180]  # degrees
  
# Logging
logging:
  use_wandb: true
  project_name: "vision-locomotion"
  log_freq: 1000  # steps
  save_dir: "./logs"
