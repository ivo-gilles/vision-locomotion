# Phase 1 Training Configuration - RMA Architecture

# Environment
env:
  num_envs: 4096
  num_observations: 75  # 48 proprio + 16 terrain latent + 8 extrinsics + 3 cmd
  num_actions: 12
  num_scandots: 16
  num_privileged: 20  # COM, friction, motor strength, etc.
  episode_length: 1000
  terrain:
    num_rows: 20
    num_cols: 10
    terrain_size: 8.0
    fractal_height_range: [0.02, 0.04]
    types: ["flat", "stairs", "curbs", "gaps", "stepping_stones"]
  
# Policy Architecture
policy:
  architecture: "rma"
  terrain_gru:
    input_dim: 48  # scandots flattened
    hidden_dim: 128
    num_layers: 1
    output_dim: 16  # gamma_t
  extrinsics_mlp:
    input_dim: 20
    hidden_dims: [64, 32]
    output_dim: 8  # z_t
  base_mlp:
    input_dim: 75
    hidden_dims: [256, 128]
    activation: "tanh"
  
# Training (same as monolithic)
training:
  algorithm: "ppo"
  total_timesteps: 15000000000
  learning_rate: 3e-4
  batch_size: 64
  n_epochs: 10
  clip_range: 0.2
  entropy_coef: 0.01
  value_loss_coef: 0.5
  max_grad_norm: 1.0
  bptt_length: 24
  checkpoint_freq: 1000000
  
# Rewards (same as monolithic)
rewards:
  tracking: 7.0
  work: -1e-4
  foot_jerk: -1e-4
  feet_drag: -1e-4
  collision: -1.0
  survival: 1.0
  
# Domain Randomization (same as monolithic)
domain_randomization:
  mass_range: [-2.0, 6.0]
  com_shift_range: [-0.15, 0.15]
  friction_range: [0.3, 1.25]
  motor_strength_range: [0.9, 1.1]
  pd_stiffness_range: [35, 45]
  pd_damping_range: [0.4, 0.6]
  push_interval: 15.0
  push_velocity: 0.3
  
# Observation Noise (same as monolithic)
observation_noise:
  joint_angles: {scale: 1.0, bias: 0.0, sigma: 0.01}
  joint_velocities: {scale: 0.05, bias: 0.0, sigma: 0.05}
  angular_velocity: {scale: 0.25, bias: 0.0, sigma: 0.05}
  orientation: {scale: 1.0, bias: 0.0, sigma: 0.02}
  scandots_height: {scale: 5.0, bias: 0.0, sigma: 0.07}
  
# Commands (same as monolithic)
commands:
  base_velocity: 0.35
  heading_range: [-10, 10]
  curve_velocity_range: [0.2, 0.75]
  curve_heading_range: [-60, 60]
  turn_heading_range: [-180, 180]
  
# Logging
logging:
  use_wandb: true
  project_name: "vision-locomotion"
  log_freq: 1000
  save_dir: "./logs"
